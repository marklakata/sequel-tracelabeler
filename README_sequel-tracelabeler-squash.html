<pre>

goal: update to look at real data.

================================
Looked at squashing data here: /home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/

smrtanalysis/3.0.3

pbalign --verbose --maxHits 1 --nproc 16 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
rt.subreads.all4mer44.bam

/home/UNIXHOME/mbrown/mbrown/workspace2014Q4/broken/errFromBAM.py rt.subreads.all4mer44.bam > rt.subreads.all4mer44.bam.error

----
The trace file:
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5
from (/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/runBasecaller.sh)

================================
Looking at the error file:

query_id	err	numerr	rlen	target_id	targetStart	targetEnd	readStart	readEnd	readLength	alignedLength

m54004_151201_015904/31981753/6_107	0.039604	4	101	All4mer.V2.44_circular_72x_l50256	1250	1349	6	107	101	101
tl.setzmw(31981753, 100)


python tracelabeler-main-zmwbase.py \
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.dme-dump.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/rt.subreads.all4mer44.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
31981753 100 0 out31981753 > out31981753.output

<img src="out31981753-squashtracelabler.png">

<img src="out31981753-squashnewtracelabler.png">

Looks really nice with so few errors.

python tracelabeler-main-zmwbase.py \
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.dme-dump.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/rt.subreads.all4mer44.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
31981753 100 1 out31981753-100-1 > out31981753-100-1.output

python tracelabeler-main-zmwbase.py \
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.dme-dump.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/rt.subreads.all4mer44.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
31981753 100 2 out31981753-100-2 > out31981753-100-2.output

python tracelabeler-main-zmwbase.py \
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.dme-dump.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/rt.subreads.all4mer44.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
31981753 100 3 out31981753-100-3 > out31981753-100-3.output

Error!!!
  File "tracelabeler-main-zmwbase.py", line 217, in <module>
    ref = reduce( lambda x,y: x+y, map( lambda ii: dat[ii][6], range(len(dat))))
TypeError: reduce() of empty sequence with no initial value

python tracelabeler-main-zmwbase.py \
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.dme-dump.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/rt.subreads.all4mer44.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
31981753 100 4 out31981753-100-4 > out31981753-100-4.output

<img src="out31981753-100-1-squashtracelabler.png">
<img src="out31981753-100-1-squashnewtracelabler.png">
----
<img src="out31981753-100-2-squashtracelabler.png">
<img src="out31981753-100-2-squashnewtracelabler.png">
----
<img src="out31981753-100-3-squashtracelabler.png">

================================

Let's look at a bad one:
m54004_151201_015904/14155959/7899_8206	0.338762	104	307	All4mer.V2.44_circular_72x_l50256rc	6282	6610	7899	8206	307

python tracelabeler-main-zmwbase.py \
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.dme-dump.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/rt.subreads.all4mer44.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
14155959 7900 0 bad-0 > bad-0.output

<img src="bad-0-squashtracelabler.png">
<img src="bad-0-squashnewtracelabler.png">

python tracelabeler-main-zmwbase.py \
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.dme-dump.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/rt.subreads.all4mer44.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
14155959 7900 1 bad-1 > bad-1.output

<img src="bad-1-squashtracelabler.png">
<img src="bad-1-squashnewtracelabler.png">

python tracelabeler-main-zmwbase.py \
/pbi/collections/315/3150005/r54004_20151201_015856/1_A01/m54004_151201_015904.trc.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.dme-dump.h5 \
/home/UNIXHOME/dalexander/Projects/SequelFrenzy/All4Mers-3150005-0026-bakeoff/T2B-mainline-dmeDump/m54004_151201_015904.subreads.bam \
/home/UNIXHOME/mbrown/mbrown/workspace2016Q1/sequel-squash/rt.subreads.all4mer44.bam \
/mnt/secondary/iSmrtanalysis/install/smrtanalysis_2.4.0.140820/common/references/All4mer_V2_44_circular_72x_l50256/sequence/All4mer_V2_44_circular_72x_l50256.fasta \
14155959 7900 2 bad-2 > bad-2.output

<img src="bad-2-squashtracelabler.png">
<img src="bad-2-squashnewtracelabler.png">
